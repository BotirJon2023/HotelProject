<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <changeSet author="b.ruzmetov" id="create room table">

        <preConditions onFail="CONTINUE" onFailMessage="Table room already exists">
            <not>
                <tableExists tableName="room"/>
            </not>
        </preConditions>

        <createTable tableName="room">
            <column name="roomNumber" type="integer">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="roomCategory" type="varchar(30)">
                <constraints nullable="false"/>
            </column>
            <column name="roomPricePerNight" type="double">
                <constraints nullable="false"/>
            </column>
            <column name="isAvailableRoom" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="roomFloor" type="integer">
                <constraints nullable="false"/>
            </column>
            <column name="isBreakfastInclude" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="checkInDate" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="checkOutDate" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="roomTabCreate" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="roomTabUpdate" type="date">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="b.ruzmetov" id="create service table">
        <preConditions onFail="CONTINUE" onFailMessage="Table service already exists">
            <not>
                <tableExists tableName="service"/>
            </not>
        </preConditions>

        <createTable tableName="service">
            <column name="serviceId" type="uuid">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="isBreakfastBooked" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="serviceBreakfastPrice" type="double">
                <constraints nullable="false"/>
            </column>
            <column name="isRestaurantBooked" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="serviceRestaurantPrice" type="double">
                <constraints nullable="false"/>
            </column>
            <column name="isBarBooked" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="serviceBarPrice" type="double">
                <constraints nullable="false"/>
            </column>
            <column name="isSwimmingPoolBooked" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="serviceSwimmingPoolPrice" type="double">
                <constraints nullable="false"/>
            </column>
            <column name="IsGymBooked" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="serviceGymPrice" type="double">
                <constraints nullable="false"/>
            </column>
            <column name="isGarageBooked" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="serviceGaragePrice" type="double">
                <constraints nullable="false"/>
            </column>
            <column name="isAirportTransferBooked" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="serviceAirportTransferPrice" type="double">
                <constraints nullable="false"/>
            </column>
            <column name="serviceTabCreate" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="serviceTabUpdate" type="date">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="b.ruzmetov" id="create event table">
        <preConditions onFail="CONTINUE" onFailMessage="Table event already exists">
            <not>
                <tableExists tableName="event"/>
            </not>
        </preConditions>

        <createTable tableName="event">
            <column name="eventId" type="uuid">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="eventName" type="varchar(100)">
                <constraints nullable="false"/>
            </column>
            <column name="eventDescription" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="eventTimeBeginning" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="eventTimeEnd" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="location" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="capacity" type="integer">
                <constraints nullable="false"/>
            </column>
            <column name="organizedCompanyName" type="varchar(100)">
                <constraints nullable="true"/>
            </column>
            <column name="contactPersonName" type="varchar(100)">
                <constraints nullable="true"/>
            </column>
            <column name="eventTabCreate" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="eventTabUpdate" type="timestamp">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="b.ruzmetov" id="create customer table">
        <preConditions onFail="CONTINUE" onFailMessage="Table customer already exists">
            <not>
                <tableExists tableName="customer"/>
            </not>
        </preConditions>

        <createTable tableName="customer">
            <column name="customerId" type="uuid">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="firstName" type="varchar(50)">
                <constraints nullable="true"/>
            </column>
            <column name="lastName" type="varchar(50)">
                <constraints nullable="true"/>
            </column>
            <column name="email" type="varchar(100)">
                <constraints nullable="true"/>
            </column>
            <column name="phoneNumber" type="integer">
                <constraints nullable="true"/>
            </column>
            <column name="address" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="loyaltyPoints" type="varchar(50)">
                <constraints nullable="true"/>
            </column>
            <column name="creditCardNumber" type="integer">
                <constraints nullable="true"/>
            </column>
            <column name="creditCardExpiringDate" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="customerTabCreate" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="customerTabUpdate" type="timestamp">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="b.ruzmetov" id="create reservation table">
        <preConditions onFail="CONTINUE" onFailMessage="Table reservation already exists">
            <not>
                <tableExists tableName="reservation"/>
            </not>
        </preConditions>

        <createTable tableName="reservation">
            <column name="reservationId" type="uuid">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="customerId" type="uuid">
                <constraints foreignKeyName="true" nullable="false"/>
            </column>
            <column name="roomNumber" type="integer">
                <constraints foreignKeyName="true" nullable="false"/>
            </column>
            <column name="eventId" type="uuid">
                <constraints foreignKeyName="true" nullable="true"/>
            </column>
            <column name="serviceId" type="uuid">
                <constraints foreignKeyName="true" nullable="true"/>
            </column>
            <column name="totalAmount" type="double">
                <constraints nullable="false"/>
            </column>
            <column name="paymentMethod" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="paymentId" type="uuid">
                <constraints nullable="true"/>
            </column>
            <column name="transactionId" type="uuid">
                <constraints nullable="true"/>
            </column>
            <column name="transactionHistory" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="cancellationInfo" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="reservationCreate" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="reservationUpdate" type="timestamp">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

</databaseChangeLog>
